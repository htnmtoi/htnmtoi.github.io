<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LLVM: llvm::ByteArrayBuilder Struct Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">mainline</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespacellvm.html">llvm</a>      </li>
      <li class="navelem"><a class="el" href="structllvm_1_1ByteArrayBuilder.html">ByteArrayBuilder</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a>  </div>
  <div class="headertitle">
<div class="title">llvm::ByteArrayBuilder Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="llvm::ByteArrayBuilder" -->
<p>This class is used to build a byte array containing overlapping bit sets.  
 <a href="structllvm_1_1ByteArrayBuilder.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="LowerBitSets_8h_source.html">LowerBitSets.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for llvm::ByteArrayBuilder:</div>
<div class="dyncontent">
<div class="center"><img src="structllvm_1_1ByteArrayBuilder__coll__graph.png" border="0" usemap="#llvm_1_1ByteArrayBuilder_coll__map" alt="Collaboration graph"/></div>
<map name="llvm_1_1ByteArrayBuilder_coll__map" id="llvm_1_1ByteArrayBuilder_coll__map">
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="structllvm_1_1ByteArrayBuilder-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="structllvm_1_1ByteArrayBuilder.html#ac3bd29ffdeec15adc4faa09373626225a275fc2f1caa7cc41bbab502eb7a64e39">BitsPerByte</a> =  8
 }</td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structllvm_1_1ByteArrayBuilder.html#abe73155a011b548aaf2d286f46a30112">ByteArrayBuilder</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structllvm_1_1ByteArrayBuilder.html#aefcc42b423b9473d155867e579682a9e">allocate</a> (<a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> std::set&lt; uint64_t &gt; &amp;Bits, uint64_t BitSize, uint64_t &amp;AllocByteOffset, uint8_t &amp;AllocMask)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate BitSize bits in the byte array where Bits contains the bits to set.  <a href="#aefcc42b423b9473d155867e579682a9e"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; uint8_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structllvm_1_1ByteArrayBuilder.html#aefbd3c9951047880b693485be73009bd">Bytes</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The byte array built so far.  <a href="#aefbd3c9951047880b693485be73009bd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structllvm_1_1ByteArrayBuilder.html#ac7c52f411376aea6b6b4e9173eb08a50">BitAllocs</a> [<a class="el" href="structllvm_1_1ByteArrayBuilder.html#ac3bd29ffdeec15adc4faa09373626225a275fc2f1caa7cc41bbab502eb7a64e39">BitsPerByte</a>]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of bytes allocated so far for each of the bits.  <a href="#ac7c52f411376aea6b6b4e9173eb08a50"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>This class is used to build a byte array containing overlapping bit sets. </p>
<p>By loading from indexed offsets into the byte array and applying a mask, a program can test bits from the bit set with a relatively short instruction sequence. For example, suppose we have 15 bit sets to lay out:</p>
<p>A (16 bits), B (15 bits), C (14 bits), D (13 bits), E (12 bits), F (11 bits), G (10 bits), H (9 bits), I (7 bits), J (6 bits), K (5 bits), L (4 bits), M (3 bits), N (2 bits), O (1 bit)</p>
<p>These bits can be laid out in a 16-byte array like this:</p>
<p>Byte Offset 0123456789ABCDEF Bit 7 HHHHHHHHHIIIIIII 6 GGGGGGGGGGJJJJJJ 5 FFFFFFFFFFFKKKKK 4 EEEEEEEEEEEELLLL 3 DDDDDDDDDDDDDMMM 2 CCCCCCCCCCCCCCNN 1 BBBBBBBBBBBBBBBO 0 AAAAAAAAAAAAAAAA</p>
<p>For example, to test bit X of A, we evaluate ((bits[X] &amp; 1) != 0), or to test bit X of I, we evaluate ((bits[9 + X] &amp; 0x80) != 0). This can be done in 1-2 machine instructions on x86, or 4-6 instructions on <a class="el" href="namespacellvm_1_1ARM.html" title="Define some predicates that are used for node matching.">ARM</a>.</p>
<p>This is a byte array, rather than (say) a 2-byte array or a 4-byte array, because for one thing it gives us better packing (the more bins there are, the less evenly they will be filled), and for another, the instruction sequences can be slightly shorter, both on x86 and <a class="el" href="namespacellvm_1_1ARM.html" title="Define some predicates that are used for node matching.">ARM</a>. </p>

<p>Definition at line <a class="el" href="LowerBitSets_8h_source.html#l00174">174</a> of file <a class="el" href="LowerBitSets_8h_source.html">LowerBitSets.h</a>.</p>
</div><hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="ac3bd29ffdeec15adc4faa09373626225"></a><!-- doxytag: member="llvm::ByteArrayBuilder::@170" ref="ac3bd29ffdeec15adc4faa09373626225" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ac3bd29ffdeec15adc4faa09373626225a275fc2f1caa7cc41bbab502eb7a64e39"></a><!-- doxytag: member="BitsPerByte" ref="ac3bd29ffdeec15adc4faa09373626225a275fc2f1caa7cc41bbab502eb7a64e39" args="" -->BitsPerByte</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="LowerBitSets_8h_source.html#l00178">178</a> of file <a class="el" href="LowerBitSets_8h_source.html">LowerBitSets.h</a>.</p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="abe73155a011b548aaf2d286f46a30112"></a><!-- doxytag: member="llvm::ByteArrayBuilder::ByteArrayBuilder" ref="abe73155a011b548aaf2d286f46a30112" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structllvm_1_1ByteArrayBuilder.html#abe73155a011b548aaf2d286f46a30112">llvm::ByteArrayBuilder::ByteArrayBuilder</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="LowerBitSets_8h_source.html#l00183">183</a> of file <a class="el" href="LowerBitSets_8h_source.html">LowerBitSets.h</a>.</p>

<p>References <a class="el" href="LowerBitSets_8h_source.html#l00181">BitAllocs</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aefcc42b423b9473d155867e579682a9e"></a><!-- doxytag: member="llvm::ByteArrayBuilder::allocate" ref="aefcc42b423b9473d155867e579682a9e" args="(const std::set&lt; uint64_t &gt; &amp;Bits, uint64_t BitSize, uint64_t &amp;AllocByteOffset, uint8_t &amp;AllocMask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="structllvm_1_1ByteArrayBuilder.html#aefcc42b423b9473d155867e579682a9e">ByteArrayBuilder::allocate</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> std::set&lt; uint64_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>Bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>BitSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t &amp;&#160;</td>
          <td class="paramname"><em>AllocByteOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t &amp;&#160;</td>
          <td class="paramname"><em>AllocMask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocate BitSize bits in the byte array where Bits contains the bits to set. </p>
<p>AllocByteOffset is set to the offset within the byte array and AllocMask is set to the bitmask for those bits. This uses the LPT (Longest Processing Time) multiprocessor scheduling algorithm to lay out the bits efficiently; the pass allocates bit sets in decreasing size order. </p>

<p>Definition at line <a class="el" href="LowerBitSets_8cpp_source.html#l00155">155</a> of file <a class="el" href="LowerBitSets_8cpp_source.html">LowerBitSets.cpp</a>.</p>

<p>References <a class="el" href="TGLexer_8h_source.html#l00046">llvm::tgtok::Bit</a>, <a class="el" href="LowerBitSets_8h_source.html#l00181">BitAllocs</a>, <a class="el" href="LowerBitSets_8h_source.html#l00178">BitsPerByte</a>, <a class="el" href="LowerBitSets_8h_source.html#l00176">Bytes</a>, and <a class="el" href="MD5_8cpp_source.html#l00054">I</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ac7c52f411376aea6b6b4e9173eb08a50"></a><!-- doxytag: member="llvm::ByteArrayBuilder::BitAllocs" ref="ac7c52f411376aea6b6b4e9173eb08a50" args="[BitsPerByte]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="structllvm_1_1ByteArrayBuilder.html#ac7c52f411376aea6b6b4e9173eb08a50">llvm::ByteArrayBuilder::BitAllocs</a>[<a class="el" href="structllvm_1_1ByteArrayBuilder.html#ac3bd29ffdeec15adc4faa09373626225a275fc2f1caa7cc41bbab502eb7a64e39">BitsPerByte</a>]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The number of bytes allocated so far for each of the bits. </p>

<p>Definition at line <a class="el" href="LowerBitSets_8h_source.html#l00181">181</a> of file <a class="el" href="LowerBitSets_8h_source.html">LowerBitSets.h</a>.</p>

<p>Referenced by <a class="el" href="LowerBitSets_8cpp_source.html#l00155">allocate()</a>, and <a class="el" href="LowerBitSets_8h_source.html#l00183">ByteArrayBuilder()</a>.</p>

</div>
</div>
<a class="anchor" id="aefbd3c9951047880b693485be73009bd"></a><!-- doxytag: member="llvm::ByteArrayBuilder::Bytes" ref="aefbd3c9951047880b693485be73009bd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;uint8_t&gt; <a class="el" href="structllvm_1_1ByteArrayBuilder.html#aefbd3c9951047880b693485be73009bd">llvm::ByteArrayBuilder::Bytes</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The byte array built so far. </p>

<p>Definition at line <a class="el" href="LowerBitSets_8h_source.html#l00176">176</a> of file <a class="el" href="LowerBitSets_8h_source.html">LowerBitSets.h</a>.</p>

<p>Referenced by <a class="el" href="LowerBitSets_8cpp_source.html#l00155">allocate()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following files:<ul>
<li><a class="el" href="LowerBitSets_8h_source.html">LowerBitSets.h</a></li>
<li><a class="el" href="LowerBitSets_8cpp_source.html">LowerBitSets.cpp</a></li>
</ul>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Thu Jul 2 2015 04:40:33 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
